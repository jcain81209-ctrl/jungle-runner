<!DOCTYPE html>
<html>
<head>
<title>Jungle Runner</title>
<style>
body { margin: 0; overflow: hidden; background: black; }
canvas { display: block; margin: auto; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 800;
canvas.height = 600;

/* =========================
   LOAD IMAGES
========================= */
const roadImg = new Image();
roadImg.src = "assets/road.png";

/* =========================
   PLAYER SETTINGS
========================= */
let player = {
  lane: 1,
  y: 450,
  width: 60,
  height: 80,
  velocityY: 0,
  gravity: 0.8,
  jumpPower: -18,
  grounded: true
};

/* =========================
   ROAD SETTINGS
========================= */
let roadScroll = 0;
let scrollSpeed = 4;   // Adjust this for slower/faster speed
const roadHeight = 10000;

/* =========================
   CONTROLS
========================= */
document.addEventListener("keydown", (e) => {
  if (e.code === "ArrowLeft" && player.lane > 0) player.lane--;
  if (e.code === "ArrowRight" && player.lane < 2) player.lane++;
  if (e.code === "Space" && player.grounded) {
    player.velocityY = player.jumpPower;
    player.grounded = false;
  }
});

/* =========================
   DRAW ROAD (3D PERSPECTIVE)
========================= */
function drawRoad() {

  roadScroll += scrollSpeed;

  if (roadScroll >= roadHeight)
    roadScroll = 0;

  // Draw visible slice only
  ctx.drawImage(
    roadImg,
    0,
    roadScroll,
    800,
    600,
    0,
    0,
    800,
    600
  );

  // Draw second slice for seamless loop
  if (roadScroll > roadHeight - 600) {
    ctx.drawImage(
      roadImg,
      0,
      0,
      800,
      600 - (roadHeight - roadScroll),
      0,
      roadHeight - roadScroll,
      800,
      600 - (roadHeight - roadScroll)
    );
  }
}

/* =========================
   UPDATE PLAYER
========================= */
function updatePlayer() {

  player.velocityY += player.gravity;
  player.y += player.velocityY;

  if (player.y >= 450) {
    player.y = 450;
    player.velocityY = 0;
    player.grounded = true;
  }
}

/* =========================
   DRAW PLAYER (LANES)
========================= */
function drawPlayer() {

  const lanePositions = [250, 400, 550];

  ctx.fillStyle = "red";
  ctx.fillRect(
    lanePositions[player.lane] - player.width / 2,
    player.y,
    player.width,
    player.height
  );
}

/* =========================
   GAME LOOP
========================= */
function gameLoop() {

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawRoad();
  updatePlayer();
  drawPlayer();

  requestAnimationFrame(gameLoop);
}

roadImg.onload = () => {
  gameLoop();
};
</script>

</body>
</html>
